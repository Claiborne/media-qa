== Automation Framework ==

In order to consolidate the various test scripts used by the media qa team, the team will begin using a unified framework that will be the main entry point for all automated tests and scripts. 

All tests will be written using rspec and any additional test frameworks needed for the application under test.  This typically means selenium client for acceptance/front end testing or plain old ruby for api testing.  Performance tests can be scripted using httperf and auto bench but are still required to be driven by the unified framework for simplified deployment and execution.

The current folder structure:

- media-qa
  - test
    - config
    - spec
    - lib
    - performance

The 'spec' folder is a repository for all tests and uses the format /test/spec/#{project}/#{module} (i.e /test/spec/social/profile)
The 'lib' folder contains all helper classes required by tests.
The performance folder contains all performance scripts.

There is a sample rspec test 'analytics.rb' under the spec/examples folder that can be used as a template for developing new tests.

To run all tests suites:

   cd media-qa/tests
   rake all

To run all examples:

   cd media-qa/tests
   rake examples

As new projects are added there will be rake tasks for running those projects like 
    rake cheats
    rake social
    rake ign-performance 

The test framework supports running in different environments so in order to use the proper environment you should specify it on the command line. Valid environments depend on the config file used by that project however we are standardizing on development, staging and production:
    rake social env=staging

Some staging environments support branches in the staging environment.  For these scenarios you need to provide the branch you want to test.  There is currently a hack in place to get this to work.  It takes the baseurl key in config and does a search and replace on the "branchname" pattern and replaces it with the environment variable that is set:
    rake social env=staging branch=release-xyz

sample config
staging:
  baseurl: branchname.stg.www.ign.com
